<!-- Imports-->
<link rel="stylesheet" href="/css/companyGraphs.css">
<script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://code.highcharts.com/highcharts-3d.js"></script>
<script src="https://code.highcharts.com/modules/exporting.js"></script>

<!--html-->
	<div style="font-size: 15px;">
		{{>./components/nav}}
	</div>
		
		<div id="container" style="height: 400px"></div>
		
		<div>

			{{#dataList}}
				<div id="{{key}}-data" data-="{{value}}">{{key}}: {{value}}</div>
			{{/dataList}}
			
			
		</div>
	<div style="font-size: 15px;">
		{{>./components/footer}}
	</div>


	<!--javascript-->
		<script th:inline="javascript">
			const dataElements = document.querySelectorAll('[id$="-data"]'); // get all elements with id ending in -data
			// console.log(dataElements); 
			// console.log("Elemento deportes: ");
			// console.log(dataElements[1].getAttribute('data-')); // get the value of the data- attribute of the second element
			// console.log(typeof dataElements[1].getAttribute('data-')); // print the type of the data
			// console.log("Elemento deportes: ");
			// console.log(document.getElementById('Deportes-data').getAttribute('data-')); // get the value of the data- attribute of the second element

			
			
			Highcharts.chart('container', {
				chart : {
					type : 'pie',
					options3d : {
						enabled : true,
						alpha : 50,
						beta : 0
					}
				},
				title : {
					text : 'Result Status'
				},
				tooltip : {
					pointFormat : '{series.name}: <b>{point.percentage:.1f}%</b>'
				},
				plotOptions : {
					pie : {
						allowPointSelect : true,
						cursor : 'pointer',
						depth : 35,
						dataLabels : {
							enabled : true,
							format : '{point.name}'
						}
					}
				},
				series : [ {
					type : 'pie',
					name : 'Ratio',
					data: [
					[ 'Deportes', parseInt(document.getElementById('Sports-data').getAttribute('data-')) ], // take the value of the data- attribute of the element with id from the DOM
					[ 'Libros', parseInt(document.getElementById('Books-data').getAttribute('data-')) ],
					[ 'Educaci√≥n', parseInt(document.getElementById('Education-data').getAttribute('data-')) ],
					[ 'Casa', parseInt(document.getElementById('Home-data').getAttribute('data-')) ],
					[ 'Musica', parseInt(document.getElementById('Music-data').getAttribute('data-')) ],
					[ 'Cine', parseInt(document.getElementById('Cinema-data').getAttribute('data-')) ],
					[ 'Otros', parseInt(document.getElementById('Others-data').getAttribute('data-')) ],
					[ 'Tecnologia', parseInt(document.getElementById('Technology-data').getAttribute('data-')) ],
					[ 'Electrodomesticos', parseInt(document.getElementById('Appliances-data').getAttribute('data-')) ]
					]
					
				} ]
			});
		</script>
