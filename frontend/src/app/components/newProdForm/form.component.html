<div class="container mt-5">
    <!-- Esta parte es para editar un producto -->
    <h2 class="text-center mb-4">{{ form_title }}</h2>
    <div *ngIf="product">
        <form [action]="'/update_product/' + product.id" method="POST" enctype="multipart/form-data">
            <div class="form-group">
                <label for="productName">Product Name</label>
                <input type="text" name="product_name" class="form-control" id="productName" [value]="product.name" required>
            </div>
            <div class="form-group">
                <label for="productImage">Product Image</label>
                <input type="file" id="image" name="product_image" accept="image/*">
                <small class="form-text text-muted">Leave empty to keep current image</small>
                <div *ngIf="product.imageBase64" class="mt-2">
                    <p>Current image:</p>
                    <img [src]="product.imageBase64" alt="Current product image" style="max-width: 200px;">
                </div>
            </div>
            <div class="form-group">
                <label for="productDescription">Product Description</label>
                <textarea name="product_description" class="form-control" id="productDescription" rows="3" required>
                    {{ product.description }}
                </textarea>
            </div>
            <div class="form-group">
                <label for="productType">Product Type</label>
                <select name="product_type" class="form-control" id="productType" required>
                    <option *ngFor="let type of productTypes" [value]="type" [selected]="product.type === type">
                        {{ type }}
                    </option>
                </select>
            </div>
            <div class="form-group">
                <label for="productQuantity">Quantity</label>
                <input name="product_stock" type="number" class="form-control" id="productQuantity" [value]="product.stock" required>
            </div>
            <div class="form-group">
                <label for="productPrice">Price</label>
                <input name="product_price" type="number" step="0.01" class="form-control" id="productPrice" [value]="product.price" required>
            </div>
            <button type="submit" class="btn btn-primary">Update Product</button>
        </form>
    </div>

    <!-- Esta parte es para crear un nuevo producto -->
    <div *ngIf="!product">
        <form action="/newproduct" method="POST" enctype="multipart/form-data">
            <div class="form-group">
                <label for="productName">Product Name</label>
                <input type="text" name="product_name" class="form-control" id="productName" placeholder="Enter product name" required>
            </div>
            <div class="form-group">
                <label for="productImage">Product Image URL</label>
                <input type="file" id="image" name="product_image" accept="image/*">
            </div>
            <div class="form-group">
                <label for="productDescription">Product Description</label>
                <textarea name="product_description" class="form-control" id="productDescription" rows="3" placeholder="Enter product description" required></textarea>
            </div>
            <div class="form-group">
                <label for="productType">Product Type</label>
                <select name="product_type" class="form-control" id="productType" required>
                    <option *ngFor="let type of productTypes" [value]="type">{{ type }}</option>
                </select>
            </div>
            <div class="form-group">
                <label for="productQuantity">Quantity</label>
                <input name="product_stock" type="number" class="form-control" id="productQuantity" placeholder="Enter quantity" required>
            </div>
            <div class="form-group">
                <label for="productPrice">Price</label>
                <input name="product_price" type="number" class="form-control" id="productPrice" placeholder="Enter price" required>
            </div>
            <button type="submit" class="btn btn-primary">Submit</button>
        </form>
    </div>
</div>